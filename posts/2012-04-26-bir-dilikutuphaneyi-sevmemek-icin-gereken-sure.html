<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>osa1 - Bir dili/kütüphaneyi sevmemek için gereken süre</title>
        <link rel="icon" href="data:,">
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />

        <link rel="alternate" type="application/rss+xml" title="osa1.net blog" href="../rss.xml" />
    </head>
    <body>
        <div id="column">
            <div id="header-inner">
                <span id="blog-title"><a href="../">osa1</a></span>
                <span class="menu-item"><a href="https://github.com/osa1">github</a></span>
                <span class="menu-item"><a href="https://gitlab.haskell.org/osa1">gitlab</a></span>
                <span class="menu-item"><a href="../rss.xml">rss</a></span>
            </div>
            <div class="inner">
                <h1 id="post-title">Bir dili/kütüphaneyi sevmemek için gereken süre</h1>

<p><strong>April 26, 2012</strong> - Tagged as: <a title="All pages tagged 'tr'." href="../tags/tr.html">tr</a>.</p>

<p>30 saniye ile 3 saat arasında değişiyor. 3 saat sonunda hala seviyorsanız büyük ihtimalle seviyorsunuz.</p>
<h3 id="örnek-1-coffeescript-3-saat">Örnek 1: CoffeeScript (3 saat)</h3>
<p>CoffeeScript’te birşeyler ciddi anlamda yanlış. Bir kısmı fikir olarak <em>bence</em> kötü, bir kısmı da hata gibi. Örneğin aşağıdaki koda bakalım:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode coffeescript"><code class="sourceCode coffee"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="dt">@e</span><span class="kw">(</span><span class="st">''</span><span class="kw">)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="kw">.</span>color<span class="kw">(</span><span class="st">'rgb(255,0,0)'</span><span class="kw">)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>    <span class="kw">.</span>attr<span class="kw">(</span> x<span class="kw">:</span> <span class="dv">20</span><span class="kw">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>           y<span class="kw">:</span> <span class="dv">100</span><span class="kw">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>           w<span class="kw">:</span> <span class="dv">10</span><span class="kw">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>           h<span class="kw">:</span> <span class="dv">100</span> <span class="kw">)</span></span></code></pre></div>
<p><code>.attr</code> çağrısına dikkat edin. Parametresinin nasıl bir JS koduna derlenmesini beklersiniz? <a href="http://coffeescript.org/#literals">Referansına</a> bakarak ben şöyle düşünüyorum: <code>x</code>, <code>y</code>, <code>w</code> ve <code>h</code> anahtarlarını içeren bir map(veya object veya her ne derseniz). Peki aslında nasıl derleniyor?</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">this</span><span class="op">.</span><span class="fu">e</span>(<span class="st">''</span>)<span class="op">.</span><span class="fu">color</span>(<span class="st">'rgb(255,0,0)'</span>)<span class="op">.</span><span class="fu">attr</span>({</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>  <span class="dt">x</span><span class="op">:</span> <span class="dv">20</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>}<span class="op">,</span> {</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>  <span class="dt">y</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>  <span class="dt">w</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>  <span class="dt">h</span><span class="op">:</span> <span class="dv">100</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>})</span></code></pre></div>
<p>x’i diğerlerinden ayırıyor. Sanki x’den sonraki virgülü parametreleri birbirinden ayıran virgülmüş gibi yorumluyor. Ama bunu yapmaması lazım çünkü 1) parametre syntaxına uymuyor(<code>:</code> karakteri) 2) madem onu parametre gibi ayırdın neden <code>y</code>, <code>w</code> ve <code>h</code>yi birbirinden ayırmadın?</p>
<p>Hadi neyse, klasik object gösterimini kullanalım, şu şekilde:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode coffeescript"><code class="sourceCode coffee"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="dt">@e</span><span class="kw">(</span><span class="st">''</span><span class="kw">)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>    <span class="kw">.</span>color<span class="kw">(</span><span class="st">'rgb(255,0,0)'</span><span class="kw">)</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>    <span class="kw">.</span>attr<span class="kw">({</span> x<span class="kw">:</span> <span class="dv">20</span><span class="kw">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>            y<span class="kw">:</span> <span class="dv">100</span><span class="kw">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>            w<span class="kw">:</span> <span class="dv">10</span><span class="kw">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>            h<span class="kw">:</span> <span class="dv">100</span> <span class="kw">})</span></span></code></pre></div>
<p>Herşey yolunda gibi, normal {} ile object syntaxını kullandım. Bu seferde, çok komik gelecek, <code>y</code>ni olduğu satırda <code>Unexpected '{'</code> hatası veriyor. Şaka gibi. O satırda öyle bir karakter bile yok. Bu hatadan emin olmak için birkaç deneme yaptım. Öyle bir olmamasına rağmen derleyici hata veriyor. Bana bariz bir bug gibi geldi.</p>
<p>Kodu istediğim gibi bir tek şu şekilde derleyebildim:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode coffeescript"><code class="sourceCode coffee"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="dt">@e</span><span class="kw">(</span><span class="st">''</span><span class="kw">)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>    <span class="kw">.</span>color<span class="kw">(</span><span class="st">'rgb(255,0,0)'</span><span class="kw">)</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>    <span class="kw">.</span>attr</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>           x<span class="kw">:</span> <span class="dv">20</span><span class="kw">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>           y<span class="kw">:</span> <span class="dv">100</span><span class="kw">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>           w<span class="kw">:</span> <span class="dv">10</span><span class="kw">,</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>           h<span class="kw">:</span> <span class="dv">100</span></span></code></pre></div>
<p>Şaka gibi, bir karakter aşağıda, ve indent edilmiş. Burda <code>.attr</code>dan sonra parantez koyarsam da derleniyor. Eğer <code>x</code>i ilk örnekteki gibi <code>.attr</code> ile aynı satıra alırsam yine ilk örnekteki hatayı alıyorum.</p>
<p>Bu kodda bir de öncesinde başka bir parametre koyacaksam syntax şöyle oluyor:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode coffeescript"><code class="sourceCode coffee"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="kw">.</span>attr <span class="dv">4</span><span class="kw">,</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>    x<span class="kw">:</span> <span class="dv">20</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>    y<span class="kw">:</span> <span class="dv">100</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a>    w<span class="kw">:</span> <span class="dv">10</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>    h<span class="kw">:</span> <span class="dv">100</span></span></code></pre></div>
<p>Daha fazlasını kaldıramayacağım :) .</p>
<p>Bir başka dikkat edilmezse çok uğraştıracak kısım da şu, eğer <code>.color(..)</code> kısmında, <code>color</code> methoduna tek parametre göndermeme rağmen parantez kullanmazsam, <code>.attr</code> kısmı <code>.color</code>a gönderdiğim stringe çağırılıyor. Bu şekilde alt alta bir üstteki methodun dönüş değerine methodlar çağırırken, her methodun parametrelerini paranteze almamız gerekiyor yani.</p>
<p>Bunun gibi şeyleri farketmem için yaklaşık 3 saat gerekti.</p>
<p><strong>DÜZENLEME</strong>: Xaph’ın yorum olarak yazdıklarını mutlaka okuyun, CoffeeScript’in nesne gösteriminin nasıl çalıştığını daha iyi açıklıyor. Bir programlama dili trollü olarak CoffeeScript’in IRC kanalını bastım ve bu bahsettiklerimi orda da anlattım. Daha sonra farkettiğim bir problem bir fonksiyona birden fazla object göndermekti. Syntax kısmı yine her seferinde çakılıyordu. JS olarak şöyle birşey yapmak istiyordum yani:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="fu">func</span>({<span class="dt">a</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>      <span class="dt">b</span><span class="op">:</span> <span class="dv">2</span>}<span class="op">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>     {<span class="dt">a</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a>      <span class="dt">b</span><span class="op">:</span> <span class="st">&quot;??&quot;</span>})<span class="op">;</span></span></code></pre></div>
<p>Bulabildiğim tek çözüm, IRC kanalından birinin yardımıyla, şu oldu:</p>
<pre><code>func({
   a: 1
   b: 2
}, {
   a: 10
   b: 2
});</code></pre>
<p>Ne kadar çirkin olduğu bariz sanırım. Bir de bu parametrelerin arasına başka tiplerde(string, int vs.) parametreler girdiğini düşünün.</p>
<p>Bizim böyle bir blog yazısında, SO başlıklarında ve IRC kanalında böyle birşeyi tartışmamız bile dilin syntaxındaki bariz bir kusurdur bence.</p>
<p>Buna göre CoffeeScript nesne gösteriminde kurallar şöyle gibi: 1) <code>{}</code> karakterinden sonra(bu karakterleri koymuyorsanız da farketmez, nesneyi gösterimine başlamadan önce), eğer nesneyi birden fazla satıra bölecekseniz, mutlaka alt satıra geçin. 2) Nesneyi gösterirken tüm anahtarları aynı kolona yerleştirin. Hangi kolon olduğu farketmez ama aynı kolonda olmalı.</p>
<h3 id="örnek-2-crafty-30-saniye">Örnek 2: <a href="http://craftyjs.com/">Crafty</a> (30 saniye)</h3>
<p>Kendisi bir Javascript oyun frameworkü. Eğer oyun yapımıyla uğraşmışsanız farkındasınızdır, inheritance çok faydalı oluyor. Çoğu zaman <code>entity</code> sınıflarınız oluyor ve bunları özelliklerine göre başka sınıflardan derive ediyorsunuz. Örneğin tüm cisimlerin sahip olması gereken belirli fiziksel özellikleri(kütle, hacim, yani çarpışmaların tespit edildiği özellikler/methodlar) bir sınıf haline getirirsiniz ve cisimleri bunun alt sınıfları olarak tanımlarsınız.</p>
<p>Bu adamlar kendi inheritance sistemlerini yapmışlar, superclass’ları bir stringde “Paddle, 2D, DOM, Color, Multiway” gibi belirtiyorsunuz. Dökümantasyonu açar açmaz bu kod karşılıyor sizi.</p>
<p>Dilin sana izin vermediği şeyleri bu şekilde aşmak bana kötü geliyor. Aslında dil izin vermiyor değil sanırım, örneğin CoffeeScript’de sınıflarla OOP yapabiliyorsunuz, multiple inheritance desteği olmasa da kolayca aynı davranışı elde edebiliyorsunuz(<a href="https://github.com/jashkenas/coffee-script/wiki/FAQ">CoffeeScript FAQ</a> sınıflar bölümüne bakın). JS nesne sistemine hakim değilim ama demek ki bunu yapmanın bir yolu var. Her halükarda bu yol kötü bir yol yani.</p>
<hr />
<p>Tabi tüm bunlar bu dilleri/kütüphaneleri kullanmayacağım anlamına gelmiyor, hatta saatlerdir de bu ikisi ile kod yazıyorum. Ben bunları programlama dillerine meraklı, kendi dili/derleyicisi/yorumlayıcısı üzerinde çalışan ve bu konularda katı fikirlere sahip biri olarak söylüyorum.</p>
<p>Yoksa Java’dan da nefret ediyorum ama 14 hafta neredeyse full-time Java yazdım. Ayrı mesele.</p>

<hr />

<div id="disqus_thread">
    <a href="#" onclick="loadDisqus(); return false;">
        (Show comments)
    </a>
</div>

<script>
    function loadDisqus() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'https://osa1.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] ||
            document.getElementsByTagName('body')[0]).appendChild(dsq);
    };
</script>

            </div>
        </div>
    </body>
</html>
