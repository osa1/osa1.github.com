<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>osa1 - Python'da circular list</title>
        <link rel="icon" href="data:,">
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />

        <link rel="alternate" type="application/rss+xml" title="osa1.net blog" href="../rss.xml" />
    </head>
    <body>
        <div id="column">
            <div id="header-inner">
                <span id="blog-title"><a href="../">osa1</a></span>
                <span class="menu-item"><a href="https://github.com/osa1">github</a></span>
                <span class="menu-item"><a href="https://gitlab.haskell.org/osa1">gitlab</a></span>
                <span class="menu-item"><a href="../rss.xml">rss</a></span>
            </div>
            <div class="inner">
                <h1 id="post-title">Python'da circular list</h1>

<p><strong>February 12, 2011</strong> - Tagged as: <a href="../tags/python.html">python</a>, <a href="../tags/tr.html">tr</a>.</p>

<p>Son dönem aramda <a href="http://landoflisp.com/">Land of Lisp</a> okumaya başlamıştım, bu sabah biraz daha kurcalayayım dedim ve common lisp’deki circular list olayını öğrendim.</p>
<p>Kısaca, listenin son hücresinin <code>cdr</code>ının listenin <code>car</code>ını gösterdiği liste. Bu durumda örneğin liste 3 elemanlıysa, 4. eleman listenin 1. elemanını ve 5. eleman listenin 2. elemanını gösteriyor.</p>
<p>Hazır Python’da <a href="http://www.rafekettler.com/magicmethods.html">magic method</a>ları yeni yeni kullanmaya başlamışken, bu Python’da nasıl olur diye düşündüm. Şu şekilde basit bir CircularList sınıfı oluşturabildim:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">class</span> CircularList():
    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, <span class="op">*</span>args):
        <span class="va">self</span>.members <span class="op">=</span> <span class="bu">list</span>(args)
        
    <span class="kw">def</span> <span class="fu">__getitem__</span>(<span class="va">self</span>, member):
        <span class="cf">return</span> <span class="va">self</span>.members[member <span class="op">%</span> <span class="bu">len</span>(<span class="va">self</span>.members)]

    <span class="kw">def</span> <span class="fu">__setitem__</span>(<span class="va">self</span>, member, value):
        <span class="va">self</span>.members[member] <span class="op">=</span> value
        <span class="cf">return</span> value

    <span class="kw">def</span> <span class="fu">__delitem__</span>(<span class="va">self</span>, member):
        <span class="cf">return</span> <span class="va">self</span>.members.remove(member)

    <span class="kw">def</span> <span class="fu">__len__</span>(<span class="va">self</span>):
        <span class="cf">return</span> <span class="bu">len</span>(<span class="va">self</span>.members)

    <span class="kw">def</span> <span class="fu">__contains__</span>(<span class="va">self</span>, item):
        <span class="cf">return</span> item <span class="kw">in</span> <span class="va">self</span>.members

    <span class="kw">def</span> <span class="fu">__iter__</span>(<span class="va">self</span>):
        i <span class="op">=</span> <span class="dv">0</span>
        <span class="cf">while</span> <span class="va">True</span>:
            <span class="cf">yield</span> <span class="va">self</span>.members[i]
            i <span class="op">+=</span> <span class="dv">1</span>
            <span class="cf">if</span> i <span class="op">&gt;=</span> <span class="bu">len</span>(<span class="va">self</span>.members):
                i <span class="op">=</span> <span class="dv">0</span>

    <span class="kw">def</span> <span class="fu">__repr__</span>(<span class="va">self</span>):
        s <span class="op">=</span> <span class="bu">str</span>(<span class="va">self</span>.members)
        <span class="cf">return</span> s.split(<span class="st">']'</span>)[<span class="op">^</span><span class="dv">0</span>]<span class="op">+</span> <span class="st">', ...]'</span>

    <span class="kw">def</span> append(<span class="va">self</span>, value):
        <span class="va">self</span>.members.append(value)

    <span class="kw">def</span> remove(<span class="va">self</span>, value):
        <span class="va">self</span>.members.remove(value)</code></pre></div>
<p>Birkaç test:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span> cl <span class="op">=</span> CircularList(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">-10</span>, <span class="st">'doh'</span>)
<span class="op">&gt;&gt;&gt;</span> cl[<span class="op">^</span><span class="dv">124</span>]<span class="st">'doh'</span>
<span class="op">&gt;&gt;&gt;</span> cl[<span class="op">^</span><span class="dv">4</span>]<span class="st">'doh'</span>
<span class="op">&gt;&gt;&gt;</span> cl.append(<span class="st">'fuuu'</span>)
<span class="op">&gt;&gt;&gt;</span> cl
[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">-10</span>, <span class="st">'doh'</span>, <span class="st">'fuuu'</span>, ...]
<span class="op">&gt;&gt;&gt;</span> cl.remove(<span class="op">-</span><span class="dv">10</span>)
<span class="op">&gt;&gt;&gt;</span> cl
[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="st">'doh'</span>, <span class="st">'fuuu'</span>, ...]
<span class="op">&gt;&gt;&gt;</span> i <span class="op">=</span> <span class="bu">iter</span>(cl)
<span class="op">&gt;&gt;&gt;</span> i.<span class="bu">next</span>()
<span class="dv">1</span>
<span class="op">&gt;&gt;&gt;</span> i.<span class="bu">next</span>()
<span class="dv">3</span>
<span class="op">&gt;&gt;&gt;</span> cl.remove(<span class="dv">5</span>)
<span class="op">&gt;&gt;&gt;</span> cl.remove(<span class="st">'fuuu'</span>)
<span class="op">&gt;&gt;&gt;</span> i.<span class="bu">next</span>()
<span class="co">'doh'</span>
<span class="op">&gt;&gt;&gt;</span> i.<span class="bu">next</span>()
<span class="dv">1</span></code></pre></div>
<p>Mümkün olduğunda Python’ın <code>list</code> veri yapısına benzetmeye çalıştım(append, remove, repr falan). Ne işe yarar henüz hiçbir fikrim yok :)</p>

<!--

<hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://osa1.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

-->

            </div>
        </div>
    </body>
</html>
