<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>osa1 - Osa1 arşiv düzenleyici yeni sürüm</title>
        <link href="http://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet" type="text/css">
        <link href="http://fonts.googleapis.com/css?family=Monda" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />

        <link rel="alternate" type="application/rss+xml" title="osa1.net blog" href="../rss.xml" />
    </head>
    <body>
        <div id="column">
            <div id="header-inner">
                <span id="blog-title"><a href="../">osa1</a></span>
                <span id="feed"><a href="../rss.xml">feed</a></span>
            </div>
            <div class="inner">
                <h1 id="post-title">Osa1 arşiv düzenleyici yeni sürüm</h1>

<p><strong>January  3, 2011</strong> - Tagged as: <a href="../tags/vim.html">vim</a>, <a href="../tags/nautilus.html">nautilus</a>, <a href="../tags/python.html">python</a>.</p>

<p>Sıkıldıkça geliştirdim arşiv düzenleyiciye sonunda albüm kapağı indirme özelliğini ekledim. Arşiv düzenleyicinin ne olduğu hakkında bilgi almak için <a href>scriptin sayfası</a>na bakabilirsiniz.</p>
<p>Henüz nautilus için olanına eklemedim, onu da muhtemelen yarın eklerim, şimdilik arayüzlü halinde albüm kapağı indiriyor sadece. Ek olarak, albüm kapaklarının indirilebilmesi için <a href="http://wwwsearch.sourceforge.net/mechanize/">mechanize</a> kütüphanesine ihtiyaç duyuyor. Ubuntu (ve sanırım Debian) kullanıcıları <code>sudo apt-get install python-mechanize</code> komutuyla indirebilirler, PyPI veya pip aracılığıyla da indirilebilir.</p>
<p>Eğer mechanize yüklü değilse, kapak indirme seçeneği aktif olmuyor. Onun dışında program aynı şekilde çalışmaya devam ediyor.</p>
<p>Bu arada programın albüm kapaklarını nasıl bulduğundan bahsedeyim biraz. Mechanize’dan <a href="http://osa1.net/nautilus-icin-cleancss-scripti/">daha önce</a> biraz bahsetmiştim. Yine mechanize ile, google resimler’e giriyorum, formu sanatçı adı + albüm adı ile dolduruyorum, sayfadan, kendi yazdığım regex deseni ile arama yapıyorum(ilk başta BeautifulSoup ile resimleri ayırıyordum, fakat onlarca sayfa için tekrarlayınca performans kaybı ço koldu), sonuçlardan birkaç kritere göre eleme yaparak, kalan ilk sonucu indirip kaydediyorum.</p>
<p>İndirme işlemlerini threading ile yapıyorum(bu tip işlemlerde çok bariz performans artışı sağlıyor). Aşağıda programı test ederken yaptığım bir denemenin sonucunu görebilirsiniz. Genel olarak oldukça isabetli resimler indiriyor. Arama cümlesi değiştirilerek (sanatçı adı + albüm adı + &quot; album cover&quot; gibi mesela) daha uygun sonuçlar da elde edilebilir.</p>
<p><img src="http://www.osa1.net/media/script_yeni.png" /></p>
<p>Yarın muhtemelen nautilus scriptine de ekleyeceğim bu özelliği, aslında ben zaten sadece nautilus scriptini kullanıyorum(aracı bir script ile, düzenleyip arşivimin olduğu yere kopyalıyor, onu da bir ara yazacağım sanırım).</p>
<p>Bu arada, sanırım tüm kodlarımı github veya benzeri bir yere koyacağım. Bu şekilde çok zor olmaya başladı, her güncellemeden sonra tar dosyasını oluşturmak bile zor geliyor artık, bir yolunu bulmam lazım. Daha düzenli olacak sanırım öyle. Django admin scriptini de bayaa geliştirdim, örneğin artık programın üzerine sürüklediğim dosya veya klasörleri alanıma upload ediyor. Sadece bu programı kullanarak her işimi görebiliyorum. Kodlarımı bir yerde topladıktan sonra, Django admin programını da koyacağım. Nasıl birşey olduğunu merak edenler için, <a href="http://127.0.0.1:8000/bil113-finale-hazirlik/">şu yazımda</a> bir ekran görüntüsü koymuştum.</p>
<p>Unutmadan, program için hata raporlarınızı ve tercüme desteğinizi bekliyorum. Tam olarak tercüme edebilsem, Ubuntu veya Pardus için paketler hazırlanabilir aslında.</p>
<p>Bir sonraki hedef, klasör izleme ve eklemeleri otomatik düzenleme özelliği. Asıl hedefim de <a href="http://www.tidysongs.com/">TidySongs</a>’daki tüm özellikleri eklemek :)</p>
<p><a href="http://www.osa1.net/media/duzenleyici_gui.tar">Şurdan</a> indirebilirsiniz. Not: paketleme, distutils vs. ile uğraşmamak için programı tek bir dosyaya sığdırmaya çalıştım. Kod biraz kötü durumda yani :) . Bir sonraki sefer ciddi bir temizlik/düzenleme yapmam gerekecek sanırım.</p>
<p>Ekleme: Benim etiket sistemi tamamen sapıtmış, daha mantıklı bir algoritma lazım sanırım.</p>

<hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://osa1.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

            </div>
        </div>
    </body>
</html>
