<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>osa1 - Django'da Markdown ve Pygments kullanmak (2)</title>
        <link rel="icon" href="data:,">
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />

        <link rel="alternate" type="application/rss+xml" title="osa1.net blog" href="../rss.xml" />
    </head>
    <body>
        <div id="column">
            <div id="header-inner">
    <span id="blog-title"><a href="../">osa1</a></span>
    <span class="menu-item"><a href="https://github.com/osa1">github</a></span>
    <span class="menu-item"><a href="https://gitlab.haskell.org/osa1">gitlab</a></span>
    <span class="menu-item"><a href="../resume.html">resume</a></span>
    <span class="menu-item"><a href="../rss.xml">rss</a></span>
</div>

            <div class="inner">
                <h1 id="post-title">Django'da Markdown ve Pygments kullanmak (2)</h1>

<p><strong>September  3, 2010</strong> - Tagged as: <a title="All pages tagged 'python'." href="../tags/python.html">python</a>, <a title="All pages tagged 'tr'." href="../tags/tr.html">tr</a>.</p>

<p>Daha önce bu konu hakkında bir yazı yazmıştım. Gayet güzel işliyordu herşey fakat bugün bir arkadaş bir hata bildirdi.</p>
<p>Eğer markdown’dan geçirdiğiniz yazıda <code>&lt;pre ...&gt;&lt;/pre&gt;</code> tagları varsa, normalde markdown bunlara dokunmuyor. Dolayısıyla daha sonra pygments uygulayabiliyorsunuz sorunsuz şekilde. Ama küçük bir farkla. Örneğin python kodu yazarken, eğer bir blokun içinde kod yazarken, boş bir satır bırakıyorsanız, boş satırdan sonraki kod bloktan dışarı çıkıyor. Örneğin aşağıdaki kod:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">class</span> Test:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="kw">def</span> bu_fonksiyon_bloktan_cikiyor():</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>        <span class="cf">pass</span></span></code></pre></div>
<p>Şu anda düzgün gözüken kodda, sitedeki değişiklikleri yapmadan önce fonksiyon bloktan dışarı çıkıyordu. Bunu nasıl çözerim diye araştrırken, Markdown’un aslında kendi pygments eklentisinin olduğunu farkettim(<a href="http://www.freewisdom.org/projects/python-markdown/CodeHilite">codehilite</a>). Bunu kullanmak için eski template filterınızda markdown’u çağırdığınız yeri <code>markdown.markdown(value, ['codehilite'])</code> şeklinde değiştirmeniz gerekli.</p>
<p>Eğer daha önceden pygments kurduysanız codehilite eklentisinin dosyasından import şeklini kontrol etmeniz yeterli. Bu şekilde aslında daha hızlı olabilir. Önceden markdown’la html taglarını yerleştirdikten sonra, BeautifulSoup ile onu ayrıştırıp, gerekli yerleri pygments’e yolluyordum. Şimdi ise BeautifulSoup’a gerek kalmadan, markdown aşamasında pygments kullanılıyor.</p>

<hr />

<div id="disqus_thread">
    <a href="#" onclick="loadDisqus(); return false;">
        (Show comments)
    </a>
</div>

<script>
    function loadDisqus() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'https://osa1.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] ||
            document.getElementsByTagName('body')[0]).appendChild(dsq);
    };
</script>

            </div>
        </div>
    </body>
</html>
